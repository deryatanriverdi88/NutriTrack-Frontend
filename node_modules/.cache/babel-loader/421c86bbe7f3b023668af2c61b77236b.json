{"ast":null,"code":"var _jsxFileName = \"/Users/flatironschool/Desktop/Projects/NutriTrack-App(Mod-5)/Frontend-NutriTrack/src/Pages/Login.js\";\nimport React, { Component } from 'react';\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: '',\n      errors: '',\n      loginOn: true\n    };\n\n    this.handleChange = event => {\n      // console.log(event.target.value)\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handleClick = () => {\n      this.setState({\n        loginOn: !this.state.loginOn\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      fetch('http://localhost:3000/login', {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          username: this.state.username,\n          password: this.state.password\n        })\n      }).then(res => res.json()).then(userData => {\n        localStorage.setItem('token', userData.token);\n        console.log(userData);\n\n        if (userData.token) {\n          this.props.redirect('home');\n        } else {\n          this.setState({\n            errors: userData.error,\n            username: \"\",\n            password: ''\n          });\n        }\n      });\n    };\n  }\n\n  render() {\n    const errors = this.state.errors; //  console.log(this.state)\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"errors\", React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \" Login Page \"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Don't have an account yet? \", React.createElement(\"b\", {\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Sign Up!\"), \" \"), this.state.loginOn ? React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Username :\", React.createElement(\"input\", {\n      type: \"text\",\n      id: \"username\",\n      value: this.state.username,\n      name: \"username\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })), React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Password :\", React.createElement(\"input\", {\n      type: \"password\",\n      id: \"password\",\n      value: this.state.password,\n      name: \"password\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    })) : \"signup\");\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/flatironschool/Desktop/Projects/NutriTrack-App(Mod-5)/Frontend-NutriTrack/src/Pages/Login.js"],"names":["React","Component","Login","state","username","password","errors","loginOn","handleChange","event","setState","target","name","value","handleClick","handleSubmit","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","userData","localStorage","setItem","token","console","log","props","redirect","error","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\n\n\nclass Login extends Component {\n state = {\n     username: '',\n     password: '',\n     errors: '', \n     loginOn: true\n }\n\n\nhandleChange = (event) => {\n  // console.log(event.target.value)\n  this.setState({\n    [event.target.name] : event.target.value\n  })\n}\n\nhandleClick = ()=>{\n  this.setState({\n    loginOn: !this.state.loginOn\n  })\n}\n\nhandleSubmit = (event) => {\n   event.preventDefault()\n   fetch('http://localhost:3000/login', {\n     method: 'POST',\n     headers: {\n       \"Content-Type\" : \"application/json\",\n       \"Accept\" : \"application/json\"\n     }, \n     body: JSON.stringify({\n       username: this.state.username,\n       password: this.state.password\n     })\n   })\n   .then(res => res.json())\n   .then(userData =>{\n     localStorage.setItem('token', userData.token)\n     console.log(userData)\n      if(userData.token){\n        this.props.redirect('home')\n      }  else {\n        this.setState({\n          errors: userData.error,\n          username: \"\",\n          password: ''\n        })\n      }\n   })\n}\n\n\n\n render() {\n\n  const errors = this.state.errors\n  //  console.log(this.state)\n  return(\n   <div>\n        errors\n    <h1> Login Page </h1>\n\n    <p>Don't have an account yet? <b onClick={this.handleClick}>Sign Up!</b> </p>\n    {\n      this.state.loginOn ? \n     \n        <form onSubmit={this.handleSubmit}>\n            <label htmlFor=\"username\">\n              Username :\n              <input type=\"text\"\n                      id=\"username\"\n                      value={this.state.username}\n                      name=\"username\"\n                      onChange={this.handleChange}\n              />\n            </label>\n            <label htmlFor=\"password\">\n              Password :\n              <input type=\"password\"\n                     id=\"password\"\n                     value={this.state.password}\n                     name=\"password\"\n                     onChange={this.handleChange}\n              />\n            </label>\n            <input type=\"submit\"/>\n        </form>: \"signup\"\n    }\n    \n\n   </div>\n    )\n   }\n }\n\n\nexport default Login"]},"metadata":{},"sourceType":"module"}