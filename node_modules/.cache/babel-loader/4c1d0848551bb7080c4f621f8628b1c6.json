{"ast":null,"code":"var _jsxFileName = \"/Users/flatironschool/Desktop/Projects/NutriTrack-App(Mod-5)/Frontend-NutriTrack/src/Pages/Login.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: '',\n      name: '',\n      age: null,\n      image: \"\",\n      gender: \"\",\n      height: null,\n      weight: null,\n      goalCalorie: null,\n      errors: '',\n      loginOn: true\n    };\n\n    this.loginForm = () => {\n      return React.createElement(\"form\", {\n        className: \"login\",\n        onSubmit: this.handleLoginSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, \"Username :\", React.createElement(\"input\", {\n        type: \"text\",\n        id: \"username\",\n        value: this.state.username,\n        name: \"username\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33\n        },\n        __self: this\n      }, \"Password :\", React.createElement(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        value: this.state.password,\n        name: \"password\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }));\n    };\n\n    this.signupForm = () => {\n      return React.createElement(\"form\", {\n        onSubmit: this.handleSignupSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \"Name :\", React.createElement(\"input\", {\n        id: \"name\",\n        name: \"name\",\n        value: this.state.name,\n        type: \"text\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        htmlFor: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Username :\", React.createElement(\"input\", {\n        id: \"username\",\n        name: \"username\",\n        value: this.state.username,\n        type: \"text\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        htmlFor: \"age\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Age:\", React.createElement(\"input\", {\n        name: \"age\",\n        id: \"age\",\n        age: \"age\",\n        value: this.state.age,\n        type: \"number\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        htmlFor: \"image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Image :\", React.createElement(\"input\", {\n        id: \"image\",\n        name: \"image\",\n        value: this.state.image,\n        type: \"text\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        htmlFor: \"gender\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Gender :\", React.createElement(\"select\", {\n        name: \"gender\",\n        id: \"gender\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \" Select\"), React.createElement(\"option\", {\n        value: \"Female\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Female\"), React.createElement(\"option\", {\n        value: \"Male\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Male\"), React.createElement(\"option\", {\n        value: \"Prefered not to say\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Prefered not to say\"))), React.createElement(\"label\", {\n        htmlFor: \"weight\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Weight :\", React.createElement(\"input\", {\n        id: \"weight\",\n        name: \"weight\",\n        value: this.state.weight,\n        type: \"number\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        htmlFor: \"height\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Height :\", React.createElement(\"input\", {\n        id: \"height\",\n        name: \"height\",\n        value: this.state.height,\n        type: \"float\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        htmlFor: \"goalCalorie\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Daily goal calorie :\", React.createElement(\"input\", {\n        id: \"goalCalorie\",\n        name: \"goalCalorie\",\n        value: this.state.goalCalorie,\n        type: \"number\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      })), React.createElement(\"label\", {\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Password :\", React.createElement(\"input\", {\n        id: \"password\",\n        name: \"password\",\n        value: this.state.password,\n        type: \"password\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }));\n    };\n\n    this.handleChange = event => {\n      // console.log(event.target.value)\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handleClick = () => {\n      this.setState({\n        loginOn: !this.state.loginOn\n      });\n    };\n\n    this.handleLoginSubmit = event => {\n      event.preventDefault(); //  debugger\n\n      fetch('http://localhost:3000/login', {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          username: this.state.username,\n          password: this.state.password\n        })\n      }).then(res => res.json()).then(userData => {\n        localStorage.setItem('token', userData.token);\n        console.log(userData);\n\n        if (userData.token) {\n          this.props.setUser(userData.current_user);\n          this.props.history.push(\"/\");\n        } else {\n          this.setState({\n            errors: userData.error\n          });\n        }\n      });\n    };\n\n    this.handleSignupSubmit = event => {\n      event.preventDefault();\n      fetch(\"http://localhost:3000/signup\", {\n        method: \"POST\",\n        headers: {\n          'Content-Type': \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          name: this.state.name,\n          username: this.state.username,\n          age: this.state.age,\n          gender: this.state.gender,\n          weight: this.state.weight,\n          height: this.state.height,\n          goal_calorie: this.state.goalCalorie,\n          password: this.state.password,\n          image: this.state.image\n        })\n      }).then(res => res.json()).then(userData => {\n        // console.log(userData)\n        localStorage.setItem('token', userData.token);\n\n        if (userData.token) {\n          // debugger\n          this.props.setUser(userData.current_user);\n          this.props.history.push(\"/\");\n        } else {\n          this.setState({\n            errors: userData.error\n          });\n        }\n      });\n    };\n  }\n\n  render() {\n    //  console.log(this.props.history)\n    console.log(this.props.current_user);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, this.state.errors, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, \" \", this.state.loginOn ? \"Login Page\" : \"Sign Up Page\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, this.state.loginOn ? \"Don't have an account yet?\" : \"I have an account\", React.createElement(\"b\", {\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, this.state.loginOn ? \"Sign Up!\" : \"Login!\")), this.state.loginOn ? this.loginForm() : this.signupForm());\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setUser: userObject => {\n      dispatch({\n        type: 'SET_USER',\n        payload: userObject\n      });\n    }\n  };\n};\n\nconst mapStateToProps = state => {\n  return {\n    current_user: state.user\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["/Users/flatironschool/Desktop/Projects/NutriTrack-App(Mod-5)/Frontend-NutriTrack/src/Pages/Login.js"],"names":["React","Component","connect","Login","state","username","password","name","age","image","gender","height","weight","goalCalorie","errors","loginOn","loginForm","handleLoginSubmit","handleChange","signupForm","handleSignupSubmit","event","setState","target","value","handleClick","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","userData","localStorage","setItem","token","console","log","props","setUser","current_user","history","push","error","goal_calorie","render","mapDispatchToProps","dispatch","userObject","type","payload","mapStateToProps","user"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\n\n\nclass Login extends Component {\n state = {\n   \n     username: '',\n     password: '',\n     name: '',\n     age: null,\n     image: \"\",\n     gender: \"\",\n     height: null,\n     weight: null,\n     goalCalorie: null,\n     errors: '', \n     loginOn: true\n }\n\nloginForm = () => {\n  return (<form className=\"login\" onSubmit={this.handleLoginSubmit}>\n           <label htmlFor=\"username\">\n              Username :\n             <input type=\"text\"\n                  id=\"username\"\n                  value={this.state.username}\n                  name=\"username\"\n                  onChange={this.handleChange}\n             />\n            </label>\n            <label htmlFor=\"password\">\n              Password :\n              <input type=\"password\"\n                    id=\"password\"\n                    value={this.state.password}\n                    name=\"password\"\n                    onChange={this.handleChange}\n              />\n            </label>\n            <input type=\"submit\"/>\n          </form>)\n}\n\nsignupForm = () => {\n  return (\n    <form onSubmit={this.handleSignupSubmit}>\n    <label htmlFor=\"name\">\n      Name :\n       <input \n         id=\"name\"\n         name=\"name\"\n         value={this.state.name}\n         type=\"text\"\n         onChange={this.handleChange}\n       />\n    </label>\n    <label htmlFor=\"username\">\n      Username : \n       <input \n         id=\"username\"\n         name=\"username\"\n         value={this.state.username}\n         type=\"text\"\n         onChange={this.handleChange}\n       />\n    </label>\n    <label htmlFor=\"age\">\n      Age: \n       <input \n         name=\"age\"\n         id=\"age\"\n         age=\"age\"\n         value={this.state.age}\n         type=\"number\"\n         onChange={this.handleChange}\n       />\n    </label>\n    <label htmlFor=\"image\"> \n    Image :\n        <input \n          id=\"image\"\n          name=\"image\"\n          value={this.state.image}\n          type=\"text\"\n          onChange={this.handleChange}\n        />\n    </label>\n    <label htmlFor=\"gender\">\n      Gender :\n      <select name=\"gender\" id=\"gender\"\n      onChange={this.handleChange}>\n        <option> Select</option>\n         <option value=\"Female\">Female</option>\n         <option value=\"Male\">Male</option>\n         <option value=\"Prefered not to say\">Prefered not to say</option>\n      </select>\n    </label>\n    <label htmlFor=\"weight\" >\n      Weight : \n       <input \n         id=\"weight\"\n         name=\"weight\"\n         value={this.state.weight}\n         type=\"number\"\n         onChange={this.handleChange}\n       />\n    </label>\n    <label htmlFor=\"height\">\n      Height : \n       <input \n         id=\"height\"\n         name=\"height\"\n         value={this.state.height}\n         type=\"float\"\n         onChange={this.handleChange}\n       />\n    </label>\n    <label htmlFor=\"goalCalorie\" >\n      Daily goal calorie : \n       <input \n         id=\"goalCalorie\"\n         name=\"goalCalorie\"\n         value={this.state.goalCalorie}\n         type=\"number\"\n         onChange={this.handleChange}\n       />\n    </label>\n    <label htmlFor=\"password\" >\n      Password : \n       <input \n         id=\"password\"\n         name=\"password\"\n         value={this.state.password}\n         type=\"password\"\n         onChange={this.handleChange}\n       />\n    </label>\n    <input type=\"submit\"/>\n    </form>\n  )\n}\n\nhandleChange = (event) => {\n  // console.log(event.target.value)\n  this.setState({\n    [event.target.name] : event.target.value\n  })\n}\n\nhandleClick = ()=>{\n  this.setState({\n    loginOn: !this.state.loginOn\n  })\n}\n\nhandleLoginSubmit = (event) => {\n\n   event.preventDefault()\n  //  debugger\n   fetch('http://localhost:3000/login', {\n     method: 'POST',\n     headers: {\n       \"Content-Type\" : \"application/json\",\n       \"Accept\" : \"application/json\"\n     }, \n     body: JSON.stringify({\n       username: this.state.username,\n       password: this.state.password\n     })\n   })\n   .then(res => res.json())\n   .then(userData =>{\n     localStorage.setItem('token', userData.token)\n     console.log(userData)\n      if(userData.token){\n        this.props.setUser(userData.current_user)\n        this.props.history.push(`/`)\n\n      }  else {\n        this.setState({\n          errors: userData.error\n        })\n      }\n   })\n}\n\nhandleSignupSubmit = (event) => {\n  event.preventDefault()\n  fetch(\"http://localhost:3000/signup\", {\n    method: \"POST\",\n    headers: {\n      'Content-Type':\"application/json\",\n      \"Accept\":\"application/json\"\n    },\n    body: JSON.stringify({\n      name: this.state.name,\n      username: this.state.username,\n      age: this.state.age,\n      gender: this.state.gender,\n      weight: this.state.weight,\n      height: this.state.height,\n      goal_calorie: this.state.goalCalorie,\n      password: this.state.password,\n      image: this.state.image\n    })\n  })\n  .then(res => res.json())\n  .then(userData => {\n    // console.log(userData)\n    localStorage.setItem('token', userData.token)\n    if(userData.token){\n      // debugger\n      this.props.setUser(userData.current_user)\n      this.props.history.push(`/`)\n    }  else {\n      this.setState({\n        errors: userData.error\n       \n      })\n    }\n  })\n}\n\n render() {\n//  console.log(this.props.history)\n   console.log(this.props.current_user)\n  return(\n   <div>\n    {\n      this.state.errors\n    }\n    <h1> {this.state.loginOn ? \"Login Page\" : \"Sign Up Page\" }</h1>\n\n    <p>{this.state.loginOn ? \n      \"Don't have an account yet?\" : \n      \"I have an account\" } \n      <b onClick={this.handleClick}>\n      { this.state.loginOn ? \n        \"Sign Up!\" : \n        \"Login!\" }\n        </b>\n       </p>\n    {\n      this.state.loginOn ? \n      this.loginForm()\n     :\n      this.signupForm()\n    }\n   </div>\n    )\n   }\n }\n\n const mapDispatchToProps = (dispatch) =>{\n  return {\n    setUser: (userObject) => {\n      dispatch({\n          type: 'SET_USER', payload: userObject\n        })\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    current_user: state.user\n  }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Login)"]},"metadata":{},"sourceType":"module"}